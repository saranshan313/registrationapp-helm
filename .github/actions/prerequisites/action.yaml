name: "Install Prerequisites"
description: "Install kubectl and Helm Packages"
runs:
  using: "composite"
  
  steps:
    - name: 'Install kubectl'
      run: |
        curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg
        echo "deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
        apt update
        apt install kubectl
      shell: bash
    
    - name: 'Install Helm'
      run: |
        curl https://baltocdn.com/helm/signing.asc | apt-key add -
        apt-get install apt-transport-https --yes
        echo "deb https://baltocdn.com/helm/stable/debian/ all main" | tee /etc/apt/sources.list.d/helm-stable-debian.list
        apt-get update
        apt-get install helm2
      shell: bash


